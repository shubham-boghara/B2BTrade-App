
@{
    ViewData["Title"] = "Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                Users
            </div>
            <div class="card-body table-responsive">
                <table id="usersTable">
                   
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {

    <script>
        $(document).ready(function () {
            $('#usersTable').DataTable({
                responsive: true,
                serverSide: true,
                processing: true,
                ajax: {
                    url: '/api/v1/tenants/my/users',
                    type: 'GET',
                    data: function (d) {
                        // Map DataTable parameters to API parameters
                        return {
                            pageNumber: Math.ceil(d.start / d.length) + 1,
                            pageSize: d.length
                        };
                    },
                    dataSrc: function (response) {
                        // Format the response to match DataTables' expectations
                        return response["Data"];
                    }
                },
                columns: [
                    { data: 'FirstName', title: 'FirstName' },
                    { data: 'LastName', title: 'LastName' },
                    { data: 'Username', title: 'Username' },
                    { data: 'PhoneNumber', title: 'PhoneNumber' },
                    { data: 'AspRoleName', title: 'AppRoleName' },
                    { data: 'RoleName', title: 'OrgRoleName' },
                    { data: 'CreatedAt', title: 'CreatedAt' },
                    { data: 'UpdatedAt', title: 'UpdatedAt' }
                ],
                pageLength: 10 // Number of records per page
            });
        });
    </script>

}

